const axios = require('axios')

class UserIntegration {
	constructor() {
		this.axiosInstance = axios.create({
			baseURL: process.env.CLUB_API_URL,
			headers: {
				'x-api-key': process.env.CLUB_API_XAPIKEY
			}
		})
	}

	async findBySellerCode(sellerCode) {
		const { data } = await this.axiosInstance.get(`/user/seller/${sellerCode}`)
		return {
			managerId: data.managerId,
			sellerId: data.sellerId
		}
	}

	async findOneById(id) {
		const { data } = await this.axiosInstance.get(`/users?_id=${id}`)
		const user = data.message.docs[0]
		return user
	}
}

module.exports = new UserIntegration()