const axios = require('axios')

class AccountIntegration {
	constructor() {

		const {
			CONTACORRENTE_API_URL,
			CONTACORRENTE_XAPIKEY
		} = process.env

		this.axiosInstance = axios.create({
			baseURL: CONTACORRENTE_API_URL
			// headers: { 'x-api-key': CONTACORRENTE_XAPIKEY}
		})
	}

	async findPointByInvoiceIdAndUserId(invoiceId, userId) {
		const { data } = await this.axiosInstance.get(`/transactions/points/?invoiceId=${invoiceId}&userId=${userId}`)
		const { points } = data.message
		return points
	}
}

module.exports = new AccountIntegration()