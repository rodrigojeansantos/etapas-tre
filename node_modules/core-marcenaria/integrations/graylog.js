const axios = require('axios')

class GrayLogClass {
	constructor() {
        this.test = true
		this.grayLogAxios = axios.create({
            baseURL: 'http://log.prd.dtxlabs.com.br/'
        })
    }
    async log(application, transactionName, payload){
        if(this.test) payload.testeMarceneiro = 'SIM'
        try {
            const response = await this.grayLogAxios.post('v1/logs', {
                ApplicationFrom: application,
                TransactionId: '71eb40fa-ffc2-428d-9ad5-5489a9b7f581',
                TransactionName: transactionName,
                ApplicationRequest: 'ApplicationRequest',
                Application: application,
                Payload: payload
            })
            return response
        } catch (error){
            console.log(error)
        }
    }
}

module.exports = new GrayLogClass()