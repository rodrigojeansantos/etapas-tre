const axios = require('axios')

class CampaignIntegration {
  constructor () {
		this.axiosInstance = axios.create({
			baseURL: process.env.CAMPAIGN_API_URL,
			headers: {
      	'x-api-key': process.env.CAMPAIGN_API_XAPIKEY
			}
		})
  }

  async listTransactionsByInvoiceId (id) {
    const { data } = await axiosInstance.get(`/invoice/${id}/transactions`)
    return data.transactions
	}
	
	async findByDate (boughtAt) {
		const { data } = await this.axiosInstance.get(`/invoices/foundcampaign?boughtAt=${boughtAt}`)
		return data.campaignId
	}
}

module.exports = new CampaignIntegration()
